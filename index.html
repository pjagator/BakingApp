<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Tampa Pro Sourdough Tracker</title>
    <link rel="stylesheet" href="style.css">
    <meta name="theme-color" content="#218085">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Tampa Pro Sourdough">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'><rect width='180' height='180' rx='40' fill='%23218085'/><text x='50%' y='50%' dominant-baseline='central' text-anchor='middle' font-size='120' fill='white'>üçû</text></svg>">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75'>üçû</text></svg>">
</head>
<body data-theme="light">
    <div id="app">
        <!-- Enhanced Professional Header -->
        <header class="app-header">
            <div class="header-main">
                <h1 class="app-title">üçû Tampa Pro Sourdough</h1>
                <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle dark mode">üåì</button>
            </div>
            <div class="climate-panel">
                <div class="climate-info">
                    <span class="weather-temp" id="current-temp">84¬∞F</span>
                    <span class="weather-humidity" id="current-humidity">75%</span>
                    <span class="fermentation-speed" id="fermentation-rate">+25% faster</span>
                </div>
                <div class="weather-trend">
                    <span class="trend-icon">üìà</span>
                    <span class="trend-text">High pressure</span>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Dashboard View -->
            <div id="dashboard-view" class="view active">
                <!-- Active Fermentation Panel -->
                <section class="active-fermentation">
                    <div class="card active-bake-card">
                        <h2 class="card-header">üïê Active Fermentation</h2>
                        <div id="active-timers" class="timers-container">
                            <!-- Timers will be populated by JavaScript -->
                        </div>
                        <button class="btn btn-primary btn-large" onclick="startNewBake()">
                            ‚ûï Start New Bake
                        </button>
                    </div>
                </section>

                <!-- Quick Stats -->
                <section class="quick-stats">
                    <div class="card">
                        <h2 class="card-header">üìä Quick Stats</h2>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <span class="stat-number" id="total-bakes">0</span>
                                <span class="stat-label">Total Bakes</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-number" id="success-rate">0%</span>
                                <span class="stat-label">Success Rate</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-number" id="avg-rating">0.0</span>
                                <span class="stat-label">Avg Rating</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-number" id="active-count">0</span>
                                <span class="stat-label">Active Bakes</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Recent Activity -->
                <section class="recent-activity">
                    <div class="card">
                        <h2 class="card-header">üìã Recent Activity</h2>
                        <ul id="recent-activity-list" class="item-list">
                            <!-- Recent activity will be populated by JavaScript -->
                        </ul>
                    </div>
                </section>
            </div>

            <!-- New Bake View -->
            <div id="new-bake-view" class="view">
                <div class="card">
                    <h2 class="card-header">üÜï Start New Bake</h2>
                    
                    <!-- Progress Indicator -->
                    <div class="progress-container">
                        <div class="progress-steps">
                            <div class="progress-step active" data-step="1">1</div>
                            <div class="progress-step" data-step="2">2</div>
                            <div class="progress-step" data-step="3">3</div>
                            <div class="progress-step" data-step="4">4</div>
                            <div class="progress-step" data-step="5">5</div>
                        </div>
                        <div class="progress-labels">
                            <span>Formula</span>
                            <span>Levain</span>
                            <span>Timing</span>
                            <span>Environment</span>
                            <span>Start</span>
                        </div>
                    </div>

                    <!-- Step 1: Formula Selection -->
                    <div id="step-1" class="bake-step active">
                        <h3>Select or Create Formula</h3>
                        <div class="form-group">
                            <label class="form-label">Choose Formula:</label>
                            <select id="formula-select" class="form-select">
                                <option value="">-- Select Formula --</option>
                                <option value="1">Tampa Country Levain 78%</option>
                                <option value="2">High-Extraction Tampa Sourdough</option>
                                <option value="custom">Create New Formula</option>
                            </select>
                        </div>
                        
                        <div id="formula-details" class="formula-details" style="display: none;">
                            <!-- Formula details will be populated by JavaScript -->
                        </div>

                        <button class="btn btn-primary" onclick="nextStep()">Next: Levain ‚Üí</button>
                    </div>

                    <!-- Step 2: Levain Preparation -->
                    <div id="step-2" class="bake-step">
                        <h3>üåæ Levain Preparation</h3>
                        <div id="levain-instructions" class="levain-instructions">
                            <!-- Levain build instructions will be populated by JavaScript -->
                        </div>
                        <div class="step-buttons">
                            <button class="btn btn-secondary" onclick="prevStep()">‚Üê Back</button>
                            <button class="btn btn-primary" onclick="nextStep()">Next: Timing ‚Üí</button>
                        </div>
                    </div>

                    <!-- Step 3: Timing Setup -->
                    <div id="step-3" class="bake-step">
                        <h3>Setup Timing</h3>
                        <div class="form-group">
                            <label class="form-label">Target Bake Time:</label>
                            <input type="datetime-local" id="target-bake-time" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Current Dough Temperature (¬∞F):</label>
                            <input type="number" id="current-temp" class="form-input" value="78" min="65" max="85">
                        </div>
                        <div class="timing-calculation" id="timing-results">
                            <!-- Calculated timing will appear here -->
                        </div>
                        <div class="step-buttons">
                            <button class="btn btn-secondary" onclick="prevStep()">‚Üê Back</button>
                            <button class="btn btn-primary" onclick="nextStep()">Next: Environment ‚Üí</button>
                        </div>
                    </div>

                    <!-- Step 4: Environment Setup -->
                    <div id="step-4" class="bake-step">
                        <h3>Environment Conditions</h3>
                        <div class="form-group">
                            <label class="form-label">Ambient Temperature (¬∞F):</label>
                            <input type="number" id="ambient-temp" class="form-input" value="76" min="65" max="90">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Humidity (%):</label>
                            <input type="number" id="ambient-humidity" class="form-input" value="68" min="30" max="90">
                        </div>
                        <div class="form-group">
                            <label class="form-label">AC Running?</label>
                            <select id="ac-status" class="form-select">
                                <option value="yes">Yes - Consistent temp</option>
                                <option value="no">No - Natural variation</option>
                                <option value="cycling">Cycling - Some variation</option>
                            </select>
                        </div>
                        <div class="step-buttons">
                            <button class="btn btn-secondary" onclick="prevStep()">‚Üê Back</button>
                            <button class="btn btn-primary" onclick="nextStep()">Next: Start ‚Üí</button>
                        </div>
                    </div>

                    <!-- Step 5: Start Confirmation -->
                    <div id="step-5" class="bake-step">
                        <h3>Ready to Start</h3>
                        <div id="bake-summary" class="bake-summary">
                            <!-- Summary will be populated by JavaScript -->
                        </div>
                        <div class="step-buttons">
                            <button class="btn btn-secondary" onclick="prevStep()">‚Üê Back</button>
                            <button class="btn btn-success" onclick="startBake()">üöÄ Start Baking!</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Active Bake View -->
            <div id="active-bake-view" class="view">
                <div class="card">
                    <h2 class="card-header">üçû Active Bake</h2>
                    
                    <!-- Current Stage Display -->
                    <div id="current-stage" class="current-stage">
                        <!-- Current stage info will be populated by JavaScript -->
                    </div>

                    <!-- Timer Display -->
                    <div id="main-timer" class="timer-card">
                        <div class="timer-time" id="timer-display">00:00:00</div>
                        <div class="timer-label" id="timer-label">Bulk Fermentation</div>
                        <div class="timer-controls">
                            <button class="btn btn-secondary" id="pause-btn" onclick="pauseTimer()">‚è∏Ô∏è Pause</button>
                            <button class="btn btn-warning" id="log-btn" onclick="showLogForm()">üìù Log</button>
                            <button class="btn btn-success" id="next-stage-btn" onclick="nextStage()">‚è≠Ô∏è Next Stage</button>
                        </div>
                    </div>

                    <!-- Environment Logging -->
                    <div id="log-form" class="log-form" style="display: none;">
                        <h3>Log Current Conditions</h3>
                        <div class="form-group">
                            <label class="form-label">Dough Temperature (¬∞F):</label>
                            <input type="number" id="log-dough-temp" class="form-input" step="0.1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Ambient Temperature (¬∞F):</label>
                            <input type="number" id="log-ambient-temp" class="form-input" step="0.1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Humidity (%):</label>
                            <input type="number" id="log-humidity" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Rise Percentage:</label>
                            <select id="log-rise" class="form-select">
                                <option value="10">10% - Just started</option>
                                <option value="25">25% - Quarter rise</option>
                                <option value="50">50% - Half risen</option>
                                <option value="75">75% - Almost ready</option>
                                <option value="90">90% - Ready soon</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Notes:</label>
                            <textarea id="log-notes" class="form-textarea" rows="3" placeholder="Dough feel, activity level, any observations..."></textarea>
                        </div>
                        <div class="step-buttons">
                            <button class="btn btn-secondary" onclick="hideLogForm()">Cancel</button>
                            <button class="btn btn-primary" onclick="saveLog()">Save Log</button>
                        </div>
                    </div>

                    <!-- Recent Logs -->
                    <div class="recent-logs">
                        <h3>Recent Logs</h3>
                        <ul id="current-bake-logs" class="item-list">
                            <!-- Logs will be populated by JavaScript -->
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Formulas View -->
            <div id="formulas-view" class="view">
                <div class="card">
                    <h2 class="card-header">üìä Formula Library</h2>
                    
                    <!-- Baker's Percentage Calculator -->
                    <div class="calculator-section">
                        <h3>Baker's Percentage Calculator</h3>
                        <div class="calculator-grid">
                            <div class="form-group">
                                <label class="form-label">Total Dough Weight (g):</label>
                                <input type="number" id="calc-total-weight" class="form-input calc-input" value="900">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Hydration (%):</label>
                                <input type="number" id="calc-hydration" class="form-input calc-input" value="75" step="0.1">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Salt (%):</label>
                                <input type="number" id="calc-salt" class="form-input calc-input" value="2.2" step="0.1">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Levain (%):</label>
                                <input type="number" id="calc-levain" class="form-input calc-input" value="20" step="0.1">
                            </div>
                        </div>
                        
                        <div class="calculated-results">
                            <h4>Calculated Weights:</h4>
                            <div class="results-grid">
                                <div class="result-item">
                                    <span class="result-label">Flour:</span>
                                    <span class="result-value" id="result-flour">0g</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Water:</span>
                                    <span class="result-value" id="result-water">0g</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Salt:</span>
                                    <span class="result-value" id="result-salt">0g</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Levain:</span>
                                    <span class="result-value" id="result-levain">0g</span>
                                </div>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" onclick="saveAsFormula()">üíæ Save as Formula</button>
                    </div>

                    <!-- Saved Formulas -->
                    <div class="saved-formulas">
                        <div class="section-header">
                            <h3>Saved Formulas</h3>
                            <button class="btn btn-secondary" onclick="importRecipe()">üì• Import Recipe</button>
                        </div>
                        <ul id="formulas-list" class="item-list">
                            <!-- Formulas will be populated by JavaScript -->
                        </ul>
                    </div>
                </div>
            </div>

            <!-- History View -->
            <div id="history-view" class="view">
                <div class="card">
                    <h2 class="card-header">üìà Baking History</h2>
                    
                    <!-- Performance Analytics -->
                    <div class="analytics-section">
                        <h3>Performance Analytics</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <span class="stat-number" id="history-total">0</span>
                                <span class="stat-label">Total Bakes</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-number" id="history-success">0%</span>
                                <span class="stat-label">Success Rate</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-number" id="history-avg-rating">0.0</span>
                                <span class="stat-label">Avg Quality</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-number" id="history-improvement">+0%</span>
                                <span class="stat-label">Improvement</span>
                            </div>
                        </div>
                    </div>

                    <!-- Completed Bakes -->
                    <div class="completed-bakes">
                        <h3>Recent Bakes</h3>
                        <ul id="history-list" class="item-list">
                            <!-- History will be populated by JavaScript -->
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Settings View -->
            <div id="settings-view" class="view">
                <div class="card">
                    <h2 class="card-header">‚öôÔ∏è Settings</h2>
                    
                    <!-- Tampa Climate Settings -->
                    <div class="settings-section">
                        <h3>Tampa Climate Defaults</h3>
                        <div class="form-group">
                            <label class="form-label">Default Ambient Temperature (¬∞F):</label>
                            <input type="number" id="default-ambient" class="form-input" value="76">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Default Humidity (%):</label>
                            <input type="number" id="default-humidity" class="form-input" value="68">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Summer Adjustments:</label>
                            <select id="summer-mode" class="form-select">
                                <option value="auto">Auto - Based on current temp</option>
                                <option value="summer">Summer Mode - Faster fermentation</option>
                                <option value="winter">Winter Mode - Standard timing</option>
                            </select>
                        </div>
                    </div>

                    <!-- Notification Settings -->
                    <div class="settings-section">
                        <h3>Notifications</h3>
                        <div class="form-group">
                            <label class="form-label">
                                <input type="checkbox" id="enable-notifications" checked>
                                Enable timer notifications
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                <input type="checkbox" id="enable-fold-reminders" checked>
                                Fold reminders during bulk
                            </label>
                        </div>
                    </div>

                    <!-- Data Management -->
                    <div class="settings-section">
                        <h3>Data Management</h3>
                        <button class="btn btn-secondary" onclick="exportData()">üì§ Export Data</button>
                        <button class="btn btn-warning" onclick="clearData()">üóëÔ∏è Clear All Data</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-button active" data-view="dashboard" onclick="showView('dashboard')">
                <span class="icon">üè†</span>
                <span>Dashboard</span>
            </button>
            <button class="nav-button" data-view="new-bake" onclick="showView('new-bake')">
                <span class="icon">‚ûï</span>
                <span>New Bake</span>
            </button>
            <button class="nav-button" data-view="formulas" onclick="showView('formulas')">
                <span class="icon">üìä</span>
                <span>Formulas</span>
            </button>
            <button class="nav-button" data-view="history" onclick="showView('history')">
                <span class="icon">üìà</span>
                <span>History</span>
            </button>
            <button class="nav-button" data-view="settings" onclick="showView('settings')">
                <span class="icon">‚öôÔ∏è</span>
                <span>Settings</span>
            </button>
        </nav>
    </div>

    <script src="app.js"></script>
</body>
</html>
